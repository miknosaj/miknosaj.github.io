import{h as P,i as A,r as c,p as H,j as t,m as L}from"./index-NvVPu8SC.js";import{a as b,I as q}from"./withContentPage-BOwhqoTN.js";function F(){!P.current&&A();const[s]=c.useState(H.current);return s}function O({src:s,caption:e}){const n=c.useRef(null);return c.useEffect(()=>{const r=n.current;if(!r)return;r.controls=!1,r.muted=!0;const a=async()=>{try{await r.play(),r.controls=!1}catch{r.controls=!0}};if(r.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA){a();return}const d=()=>{a()};return r.addEventListener("canplay",d,{once:!0}),()=>{r.removeEventListener("canplay",d)}},[s]),t.jsx(b,{caption:e,children:t.jsx("video",{ref:n,src:s,className:"w-full h-auto object-cover",style:{objectPosition:"center"},preload:"metadata",autoPlay:!0,loop:!0,muted:!0,playsInline:!0})})}function z({src:s,alt:e,borderWidth:n=8}){return t.jsx("div",{className:"relative w-full h-full",style:{transformOrigin:"50% 50%"},children:t.jsx("div",{className:"absolute inset-0 bg-white shadow-[0px_2px_8px_0px_rgba(0,0,0,0.15)]",style:{padding:n},children:t.jsx("div",{className:"relative w-full h-full overflow-hidden",children:t.jsx("img",{src:s,alt:e,className:"absolute left-0 top-0 w-full h-full object-cover select-none",style:{objectPosition:"center",userSelect:"none"},draggable:!1})})})})}function D(s){let e=0;for(let n=0;n<s.length;n++)e=(e<<5)-e+s.charCodeAt(n);return e>>>0}function V(s){let e=s;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function W({images:s,pageType:e="writing",height:n=360,rotationMin:r=.5,rotationMax:a=1.5,duration:d}){const[m,N]=c.useState(()=>s.map((i,o)=>o)),[v,g]=c.useState(!1),[f,j]=c.useState(!1),_=F(),C=c.useMemo(()=>{const i=Math.max(r,0),o=Math.max(a-r,0);return s.map((p,x)=>{const u=V(D(p.src+":"+x)),l=(u()*o+i)*(u()>.5?1:-1),h=u()*2-1;return{angle:l,tx:h}})},[s,r,a]),M=m[0]??0,R=s[M]?.caption,I=()=>{f||m.length<2||j(!0)},S=()=>{N(([i,...o])=>[...o,i]),j(!1)},T=d??(_?0:.4),$=[.25,.46,.45,.94];return t.jsx(b,{pageType:e,caption:R,children:t.jsx("div",{className:"relative w-full",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:t.jsx("div",{className:"relative w-full",style:{height:n},children:m.map((i,o)=>{const p=s[i],x=s.length-o,u=C[i]??{angle:0,tx:0},l=o===0,h=o===1,y=v?0:u.angle,w=v?0:u.tx,E=l&&f?0:1;return t.jsx(L.div,{className:"absolute inset-0",style:{zIndex:x,transformOrigin:"50% 50%"},initial:{opacity:1,y:0,rotate:y,x:w},animate:{opacity:E,y:l&&f?-28:0,rotate:y,x:w},transition:{duration:T,ease:$},onAnimationComplete:()=>{l&&f&&S()},onClick:l?I:void 0,role:l?"button":void 0,"aria-label":l?"Next photo":void 0,children:t.jsx(z,{src:p.src,alt:p.alt})},`${p.src}-${i}`)})})})})}function B({blocks:s}){return t.jsx("div",{className:"flex flex-col gap-4 w-full overflow-visible",children:s.map((e,n)=>{if(e.type==="sectionHeader")return t.jsxs("div",{className:"flex items-center gap-3 w-full mt-8 mb-2 overflow-visible",children:[t.jsx("span",{className:"portfolio-text halbfett whitespace-nowrap",children:e.title}),t.jsx("span",{className:"flex-1 border-t",style:{borderColor:"var(--portfolio-border)"}})]},`section-${n}`);if(e.type==="text")return t.jsx("p",{className:"portfolio-text",children:e.content},`text-${n}`);if(e.type==="image"){const{image:r}=e;return t.jsx(q,{src:r.src,alt:r.alt,pageType:"writing",caption:r.caption},`image-${n}`)}if(e.type==="video"){const{video:r}=e;return t.jsx(O,{src:r.src,caption:r.caption},`video-${n}`)}if(e.type==="quote"){const{quote:r,cite:a}=e;return t.jsxs("figure",{className:"mt-6 mb-4 pl-4 border-l-2",style:{borderColor:"var(--portfolio-border)"},children:[t.jsx("blockquote",{className:"portfolio-text halbfett text-[#9c9c9b]",children:r}),a&&t.jsxs("figcaption",{className:"mt-2 text-sm text-[#9c9c9b]",children:["â€” ",a]})]},`quote-${n}`)}if(e.type==="framedText"){const{text:r,height:a}=e,d=a??200;return t.jsx("div",{className:"w-full",children:t.jsx("div",{className:"mt-10 mb-6 inline-image-container w-full md:w-[115%] md:-ml-[7.5%]",children:t.jsxs("div",{className:"relative w-full overflow-hidden shadow-[0px_2px_8px_0px_rgba(0,0,0,0.15)]",children:[t.jsx("div",{className:"w-full flex items-center justify-center bg-white",style:{height:`${d}px`},children:t.jsx("span",{className:"portfolio-text text-[#6a6a6a]",children:r})}),t.jsx("div",{"aria-hidden":"true",className:"pointer-events-none absolute border-[8px] border-solid border-white inset-[-8px] shadow-[0px_2px_8px_0px_rgba(0,0,0,0.15)]"})]})})},`framed-${n}`)}return e.type==="imageStack"?t.jsx(W,{images:e.stack,pageType:"writing",height:e.height},`stack-${n}`):null})})}export{B as W};
