import{h as q,i as F,r as p,p as O,j as t,m as E}from"./index--oB1vNdK.js";import{a as b,I as H}from"./withContentPage-n7L0pMzs.js";function z(){!q.current&&F();const[s]=p.useState(O.current);return s}function A({src:s,caption:e}){return t.jsx(b,{caption:e,children:t.jsx("video",{src:s,className:"w-full h-auto object-cover",style:{objectPosition:"center"},preload:"metadata",autoPlay:!0,loop:!0,muted:!0,playsInline:!0})})}function L({src:s,alt:e,borderWidth:r=8}){return t.jsx("div",{className:"relative w-full h-full",style:{transformOrigin:"50% 50%"},children:t.jsx("div",{className:"absolute inset-0 bg-white shadow-[0px_2px_8px_0px_rgba(0,0,0,0.15)]",style:{padding:r},children:t.jsx("div",{className:"relative w-full h-full overflow-hidden",children:t.jsx("img",{src:s,alt:e,className:"absolute left-0 top-0 w-full h-full object-cover select-none",style:{objectPosition:"center",userSelect:"none"},draggable:!1})})})})}function W(s){let e=0;for(let r=0;r<s.length;r++)e=(e<<5)-e+s.charCodeAt(r);return e>>>0}function D(s){let e=s;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function V({images:s,pageType:e="writing",height:r=360,rotationMin:a=.5,rotationMax:l=1.5,duration:f}){const[m,N]=p.useState(()=>s.map((o,n)=>n)),[g,v]=p.useState(!1),[d,j]=p.useState(!1),_=z(),I=p.useMemo(()=>{const o=Math.max(a,0),n=Math.max(l-a,0);return s.map((u,x)=>{const c=D(W(u.src+":"+x)),i=(c()*n+o)*(c()>.5?1:-1),h=c()*2-1;return{angle:i,tx:h}})},[s,a,l]),$=m[0]??0,C=s[$]?.caption,M=()=>{d||m.length<2||j(!0)},S=()=>{N(([o,...n])=>[...n,o]),j(!1)},R=f??(_?0:.4),T=[.25,.46,.45,.94];return t.jsx(b,{pageType:e,caption:C,children:t.jsx("div",{className:"relative w-full",onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:t.jsx("div",{className:"relative w-full",style:{height:r},children:m.map((o,n)=>{const u=s[o],x=s.length-n,c=I[o]??{angle:0,tx:0},i=n===0,h=n===1,w=g?0:c.angle,y=g?0:c.tx,P=i&&d?0:1;return t.jsx(E.div,{className:"absolute inset-0",style:{zIndex:x,transformOrigin:"50% 50%"},initial:{opacity:1,y:0,rotate:w,x:y},animate:{opacity:P,y:i&&d?-28:0,rotate:w,x:y},transition:{duration:R,ease:T},onAnimationComplete:()=>{i&&d&&S()},onClick:i?M:void 0,role:i?"button":void 0,"aria-label":i?"Next photo":void 0,children:t.jsx(L,{src:u.src,alt:u.alt})},`${u.src}-${o}`)})})})})}function G({blocks:s}){return t.jsx("div",{className:"flex flex-col gap-4 w-full overflow-visible",children:s.map((e,r)=>{if(e.type==="sectionHeader")return t.jsxs("div",{className:"flex items-center gap-3 w-full mt-8 mb-2 overflow-visible",children:[t.jsx("span",{className:"portfolio-text halbfett whitespace-nowrap",children:e.title}),t.jsx("span",{className:"flex-1 border-t",style:{borderColor:"var(--portfolio-border)"}})]},`section-${r}`);if(e.type==="text")return t.jsx("p",{className:"portfolio-text",children:e.content},`text-${r}`);if(e.type==="image"){const{image:a}=e;return t.jsx(H,{src:a.src,alt:a.alt,pageType:"writing",caption:a.caption},`image-${r}`)}if(e.type==="video"){const{video:a}=e;return t.jsx(A,{src:a.src,caption:a.caption},`video-${r}`)}if(e.type==="quote"){const{quote:a,cite:l}=e;return t.jsxs("figure",{className:"mt-6 mb-4 pl-4 border-l-2",style:{borderColor:"var(--portfolio-border)"},children:[t.jsx("blockquote",{className:"portfolio-text halbfett text-[#9c9c9b]",children:a}),l&&t.jsxs("figcaption",{className:"mt-2 text-sm text-[#9c9c9b]",children:["â€” ",l]})]},`quote-${r}`)}if(e.type==="framedText"){const{text:a,height:l}=e,f=l??200;return t.jsx("div",{className:"w-full",children:t.jsx("div",{className:"mt-10 mb-6 inline-image-container w-full md:w-[115%] md:-ml-[7.5%]",children:t.jsxs("div",{className:"relative w-full overflow-hidden shadow-[0px_2px_8px_0px_rgba(0,0,0,0.15)]",children:[t.jsx("div",{className:"w-full flex items-center justify-center bg-white",style:{height:`${f}px`},children:t.jsx("span",{className:"portfolio-text text-[#6a6a6a]",children:a})}),t.jsx("div",{"aria-hidden":"true",className:"pointer-events-none absolute border-[8px] border-solid border-white inset-[-8px] shadow-[0px_2px_8px_0px_rgba(0,0,0,0.15)]"})]})})},`framed-${r}`)}return e.type==="imageStack"?t.jsx(V,{images:e.stack,pageType:"writing",height:e.height},`stack-${r}`):null})})}export{G as W};
