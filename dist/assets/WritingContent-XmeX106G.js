import{h as F,i as O,r as m,p as z,j as e,m as E}from"./index-DdDfeRjX.js";import{a as b,P as H,I as A}from"./withContentPage-h8KaTHOb.js";function L(){!F.current&&O();const[s]=m.useState(z.current);return s}function W({src:s,caption:r}){return e.jsx(b,{caption:r,children:e.jsx("video",{src:s,className:"w-full h-auto object-cover",style:{objectPosition:"center"},preload:"metadata",autoPlay:!0,loop:!0,muted:!0,playsInline:!0})})}function D({src:s,alt:r,borderWidth:t=8}){return e.jsx("div",{className:"relative w-full h-full",style:{transformOrigin:"50% 50%"},children:e.jsx("div",{className:"absolute inset-0 bg-white shadow-[0px_2px_8px_0px_rgba(0,0,0,0.15)]",style:{padding:t},children:e.jsx(H,{src:s,alt:r,priority:!0,containerClassName:"relative w-full h-full",className:"absolute left-0 top-0 w-full h-full select-none",style:{objectPosition:"center",userSelect:"none"},draggable:!1,placeholderClassName:"bg-[#f1f1f1]"})})})}function V(s){let r=0;for(let t=0;t<s.length;t++)r=(r<<5)-r+s.charCodeAt(t);return r>>>0}function X(s){let r=s;return()=>(r=(1664525*r+1013904223)%4294967296)/4294967296}function B({images:s,pageType:r="writing",height:t=360,rotationMin:n=.5,rotationMax:a=1.5,duration:i}){var y;const[u,_]=m.useState(()=>s.map((l,o)=>o)),[g,v]=m.useState(!1),[p,j]=m.useState(!1),I=L(),C=m.useMemo(()=>{const l=Math.max(n,0),o=Math.max(a-n,0);return s.map((f,x)=>{const d=X(V(f.src+":"+x)),c=(d()*o+l)*(d()>.5?1:-1),h=d()*2-1;return{angle:c,tx:h}})},[s,n,a]),$=u[0]??0,M=(y=s[$])==null?void 0:y.caption,S=()=>{p||u.length<2||j(!0)},P=()=>{_(([l,...o])=>[...o,l]),j(!1)},R=i??(I?0:.4),T=[.25,.46,.45,.94];return e.jsx(b,{pageType:r,caption:M,children:e.jsx("div",{className:"relative w-full",onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:e.jsx("div",{className:"relative w-full",style:{height:t},children:u.map((l,o)=>{const f=s[l],x=s.length-o,d=C[l]??{angle:0,tx:0},c=o===0,h=o===1,w=g?0:d.angle,N=g?0:d.tx,q=c&&p?0:1;return e.jsx(E.div,{className:"absolute inset-0",style:{zIndex:x,transformOrigin:"50% 50%"},initial:{opacity:1,y:0,rotate:w,x:N},animate:{opacity:q,y:c&&p?-28:0,rotate:w,x:N},transition:{duration:R,ease:T},onAnimationComplete:()=>{c&&p&&P()},onClick:c?S:void 0,role:c?"button":void 0,"aria-label":c?"Next photo":void 0,children:e.jsx(D,{src:f.src,alt:f.alt})},`${f.src}-${l}`)})})})})}function K({blocks:s}){let r=!1;return e.jsx("div",{className:"flex flex-col gap-4 w-full overflow-visible",children:s.map((t,n)=>{if(t.type==="sectionHeader")return e.jsxs("div",{className:"flex items-center gap-3 w-full mt-8 mb-2 overflow-visible",children:[e.jsx("span",{className:"portfolio-text halbfett whitespace-nowrap",children:t.title}),e.jsx("span",{className:"flex-1 border-t",style:{borderColor:"var(--portfolio-border)"}})]},`section-${n}`);if(t.type==="text")return e.jsx("p",{className:"portfolio-text",children:t.content},`text-${n}`);if(t.type==="image"){const{image:a}=t,i=!r;return r=!0,e.jsx(A,{src:a.src,alt:a.alt,pageType:"writing",caption:a.caption,priority:i},`image-${n}`)}if(t.type==="video"){const{video:a}=t;return e.jsx(W,{src:a.src,caption:a.caption},`video-${n}`)}if(t.type==="quote"){const{quote:a,cite:i}=t;return e.jsxs("figure",{className:"mt-6 mb-4 pl-4 border-l-2",style:{borderColor:"var(--portfolio-border)"},children:[e.jsx("blockquote",{className:"portfolio-text halbfett text-[#9c9c9b]",children:a}),i&&e.jsxs("figcaption",{className:"mt-2 text-sm text-[#9c9c9b]",children:["â€” ",i]})]},`quote-${n}`)}if(t.type==="framedText"){const{text:a,height:i}=t,u=i??200;return e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"mt-10 mb-6 inline-image-container w-full md:w-[115%] md:-ml-[7.5%]",children:e.jsxs("div",{className:"relative w-full overflow-hidden shadow-[0px_2px_8px_0px_rgba(0,0,0,0.15)]",children:[e.jsx("div",{className:"w-full flex items-center justify-center bg-white",style:{height:`${u}px`},children:e.jsx("span",{className:"portfolio-text text-[#6a6a6a]",children:a})}),e.jsx("div",{"aria-hidden":"true",className:"pointer-events-none absolute border-[8px] border-solid border-white inset-[-8px] shadow-[0px_2px_8px_0px_rgba(0,0,0,0.15)]"})]})})},`framed-${n}`)}return t.type==="imageStack"?e.jsx(B,{images:t.stack,pageType:"writing",height:t.height},`stack-${n}`):null})})}export{K as W};
