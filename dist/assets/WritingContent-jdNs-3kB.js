import{j as s,u as re,m as le}from"./framer-motion-IGSP7b5K.js";import{a as U,I as ce}from"./withContentPage-XuNeQCE0.js";import{a as d}from"./react-vendor-CRtdKe_D.js";function de({src:n,caption:e}){const a=d.useRef(null);return d.useEffect(()=>{const t=a.current;if(!t)return;t.setAttribute("playsinline","true"),t.setAttribute("muted","true"),t.muted=!0,t.autoplay=!0,t.controls=!1;const i=async()=>{try{await t.play(),t.controls=!1}catch{t.controls=!0}};if(t.readyState>=HTMLMediaElement.HAVE_ENOUGH_DATA){i();return}const m=()=>{i()};return t.addEventListener("loadeddata",m,{once:!0}),()=>{t.removeEventListener("loadeddata",m)}},[n]),s.jsx(U,{caption:e,children:s.jsx("video",{ref:a,src:n,className:"w-full h-auto object-cover",style:{objectPosition:"center"},preload:"auto",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,controls:!1,controlsList:"nodownload noremoteplayback"})})}function me({src:n,alt:e,borderWidth:a=8}){const t=`var(--stack-border-thickness, ${a}px)`;return s.jsx("div",{className:"relative w-full h-full",style:{transformOrigin:"50% 50%"},children:s.jsxs("div",{className:"absolute inset-0 overflow-hidden bg-white transition-shadow duration-300 ease-out shadow-[0px_6px_18px_0px_rgba(0,0,0,0.22)] group-hover:shadow-[0px_3px_12px_0px_rgba(0,0,0,0.16)]",children:[s.jsx("img",{src:n,alt:e,className:"absolute inset-0 w-full h-full object-contain select-none",style:{objectPosition:"center",userSelect:"none"},draggable:!1}),s.jsx("div",{"aria-hidden":"true",className:"pointer-events-none absolute border-solid border-white transition-shadow duration-300 ease-out shadow-[0px_4px_12px_0px_rgba(0,0,0,0.18)] group-hover:shadow-[0px_2px_8px_0px_rgba(0,0,0,0.12)]",style:{borderWidth:t,inset:`calc(-1 * ${t})`}})]})})}class he{cache=new Map;loadingPromises=new Map;async getDimensions(e){if(this.cache.has(e))return this.cache.get(e);if(this.loadingPromises.has(e))return this.loadingPromises.get(e);const a=this.loadImageDimensions(e);this.loadingPromises.set(e,a);const t=await a;return this.loadingPromises.delete(e),t}loadImageDimensions(e){return new Promise(a=>{const t=new Image;t.onload=()=>{const i={width:t.naturalWidth,height:t.naturalHeight,aspectRatio:t.naturalWidth/t.naturalHeight};this.cache.set(e,i),a(i)},t.onerror=()=>a(null),t.src=e})}async preloadImages(e){await Promise.all(e.map(a=>this.getDimensions(a)))}getCached(e){return this.cache.get(e)??null}clear(){this.cache.clear(),this.loadingPromises.clear()}}const z=new he;function pe(n){let e=0;for(let a=0;a<n.length;a++)e=(e<<5)-e+n.charCodeAt(a);return e>>>0}function ue(n){let e=n;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function ge({images:n,pageType:e="writing",height:a,mobileHeight:t,rotationMin:i=1.2,rotationMax:m=2.8,duration:y}){const[j,V]=d.useState(()=>n.map((o,l)=>l)),[D,H]=d.useState(!1),[C,T]=d.useState(!1),[E,A]=d.useState(!1),[v,J]=d.useState(0),[L,G]=d.useState(()=>{const o=new Map;return n.forEach((l,h)=>{const c=z.getCached(l.src);c&&o.set(h,c)}),o}),X=re();d.useEffect(()=>{(async()=>{const l=new Map;await Promise.all(n.map(async(h,c)=>{const g=await z.getDimensions(h.src);g&&l.set(c,g)})),G(l)})()},[n]);const Y=d.useMemo(()=>{const o=Math.max(i,0),l=Math.max(m-i,0),h=Math.max(n.length-1,1),c=.35,g=[];return n.map((N,r)=>{const w=ue(pe(`${N.src}:${r}:${v}`)),p=r%2===0?1:-1,$=(r+v)%4<2?1:-1,u=r/h,x=o+l*u,f=Math.sin((v+r)*1.13)*.2;let b=p*(x+(w()-.5)*.32+f);Math.abs(b)<o*.65&&(b=p*o*.65);let F=0;for(;g.some(P=>Math.abs(P-b)<c)&&F<6;)b+=p*(c-.05),F+=1;g.push(b);const se=1+.25*Math.cos((v+r)*.9),O=(10+u*24)*se,ae=(w()-.5)*(3+u*3),ne=Math.sin((v+r)*.7)*2;let M=p*(O+ae)+ne;const oe=O*.42,ie=(w()-.5)*(2.5+u*2.5);let _=$*(oe+ie);const B=12+u*8;Math.abs(M)<B&&(M=(M===0?p:Math.sign(M))*B);const q=6+u*6;return Math.abs(_)<q&&(_=(_===0?$:Math.sign(_))*q),{angle:b,tx:M,ty:_}})},[n,i,m,v]),W=j[0]??0,k=n[W]?.caption,S=L.get(W),I=a??S?.height??360,K=S?S.width:void 0,Q=t??Math.round(I*.75),Z=()=>{C||E||j.length<2||(A(!0),setTimeout(()=>T(!0),R*400))},ee=()=>{V(([o,...l])=>[...l,o]),T(!1),A(!1)},R=y??(X?0:.4),te=[.25,.46,.45,.94];return s.jsx(U,{pageType:e,caption:k,noBorder:!0,captionClassName:"mt-[3.25rem] md:mt-12",containerClassName:"mt-12 mb-10 md:mt-16 md:mb-18",children:s.jsx("div",{className:"relative w-full scale-[0.75] md:scale-100 [--stack-border-thickness:10.6667px] md:[--stack-border-thickness:8px]",style:{transformOrigin:"top center","--mobile-height":`${Q}px`,"--desktop-height":`${I}px`,height:"var(--mobile-height)",marginTop:"3rem",marginBottom:"2rem"},onMouseEnter:()=>H(!0),onMouseLeave:()=>{H(!1),J(o=>o+1)},children:s.jsx("div",{className:"group relative w-full mx-auto",style:{height:I,maxWidth:K},children:j.map((o,l)=>{const h=n[o],c=L.get(o),g=n.length-l,N=Y[o]??{angle:0,tx:0,ty:0},r=l===0,w=D?0:N.angle,p=D?0:N.tx,$=D?0:N.ty,u=r&&C?0:1;let x="100%",f="100%";return c&&(a?(x=`${a*c.aspectRatio}px`,f=`${a}px`):(x=`${c.width}px`,f=`${c.height}px`)),s.jsx(le.div,{className:"absolute left-1/2 top-1/2",style:{zIndex:g,transformOrigin:"50% 50%",width:x,height:f,marginLeft:`-${parseFloat(x)/2}${x.includes("px")?"px":"%"}`,marginTop:`-${parseFloat(f)/2}${f.includes("px")?"px":"%"}`},initial:{opacity:1,y:$,rotate:w,x:p},animate:{opacity:u,y:r&&(E||C)?-28:$,rotate:w,x:p},transition:{duration:R,ease:te},onAnimationComplete:()=>{r&&C&&ee()},onClick:r?Z:void 0,role:r?"button":void 0,"aria-label":r?"Next photo":void 0,children:s.jsx(me,{src:h.src,alt:h.alt})},`${h.src}-${o}`)})})})})}function we({blocks:n}){return s.jsx("div",{className:"flex flex-col gap-4 w-full overflow-visible",children:n.map((e,a)=>{if(e.type==="sectionHeader")return s.jsxs("div",{className:"flex items-center gap-3 w-full mt-8 mb-2 overflow-visible",children:[s.jsx("span",{className:"portfolio-text halbfett whitespace-nowrap",children:e.title}),s.jsx("span",{className:"flex-1 border-t",style:{borderColor:"var(--portfolio-border)"}})]},`section-${a}`);if(e.type==="text")return s.jsx("p",{className:"portfolio-text",children:e.content},`text-${a}`);if(e.type==="image"){const{image:t}=e;return s.jsx(ce,{src:t.src,alt:t.alt,pageType:"writing",caption:t.caption},`image-${a}`)}if(e.type==="imageNoBorder"){const{image:t}=e;return s.jsx("div",{className:"mt-10 mb-6 w-full md:w-[115%] md:-ml-[7.5%]",children:s.jsxs("div",{className:"relative w-full overflow-hidden h-[300px] md:h-[500px]",children:[s.jsx("img",{src:t.src,alt:t.alt,className:"w-full h-full object-cover",style:{objectPosition:"center 70%"},loading:"lazy",decoding:"async"}),t.caption&&s.jsx("figcaption",{className:"absolute -bottom-3 md:bottom-1 left-1/2 -translate-x-1/2 text-sm text-[#9c9c9b] leading-relaxed text-center whitespace-nowrap",children:t.caption})]})},`image-no-border-${a}`)}if(e.type==="video"){const{video:t}=e;return s.jsx(de,{src:t.src,caption:t.caption},`video-${a}`)}if(e.type==="quote"){const{quote:t,cite:i}=e;return s.jsxs("figure",{className:"mt-6 mb-4 pl-4 border-l-2",style:{borderColor:"var(--portfolio-border)"},children:[s.jsx("blockquote",{className:"portfolio-text halbfett text-[#9c9c9b]",children:t.split(`
`).map((m,y,j)=>s.jsxs("span",{children:[m,y<j.length-1&&s.jsx("br",{})]},`${a}-line-${y}`))}),i&&s.jsxs("figcaption",{className:"mt-2 text-sm text-[#9c9c9b]",children:["â€” ",i]})]},`quote-${a}`)}if(e.type==="framedText"){const{text:t,height:i}=e,m=i??200;return s.jsx("div",{className:"w-full",children:s.jsx("div",{className:"mt-10 mb-6 inline-image-container w-full md:w-[115%] md:-ml-[7.5%]",children:s.jsxs("div",{className:"relative w-full overflow-hidden shadow-[0px_2px_8px_0px_rgba(0,0,0,0.15)]",children:[s.jsx("div",{className:"w-full flex items-center justify-center bg-white",style:{height:`${m}px`},children:s.jsx("span",{className:"portfolio-text text-[#6a6a6a]",children:t})}),s.jsx("div",{"aria-hidden":"true",className:"pointer-events-none absolute border-[8px] border-solid border-white inset-[-8px] shadow-[0px_2px_8px_0px_rgba(0,0,0,0.15)]"})]})})},`framed-${a}`)}return e.type==="imageStack"?s.jsx(ge,{images:e.stack,pageType:"writing",height:e.height,mobileHeight:e.mobileHeight},`stack-${a}`):null})})}export{we as W,z as i};
