import{h as A,i as L,r as c,p as H,j as t,m as P}from"./index-CkzoqLOS.js";import{a as b,I as O}from"./withContentPage-BhF1WCZ9.js";function q(){!A.current&&L();const[s]=c.useState(H.current);return s}function F({src:s,caption:e}){const a=c.useRef(null);return c.useEffect(()=>{const r=a.current;if(!r)return;r.setAttribute("playsinline","true"),r.setAttribute("muted","true"),r.muted=!0,r.autoplay=!0,r.controls=!1;const n=async()=>{try{await r.play(),r.controls=!1}catch{r.controls=!0}};if(r.readyState>=HTMLMediaElement.HAVE_ENOUGH_DATA){n();return}const d=()=>{n()};return r.addEventListener("loadeddata",d,{once:!0}),()=>{r.removeEventListener("loadeddata",d)}},[s]),t.jsx(b,{caption:e,children:t.jsx("video",{ref:a,src:s,className:"w-full h-auto object-cover",style:{objectPosition:"center"},preload:"auto",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,controls:!1,controlsList:"nodownload noremoteplayback"})})}function D({src:s,alt:e,borderWidth:a=8}){return t.jsx("div",{className:"relative w-full h-full",style:{transformOrigin:"50% 50%"},children:t.jsx("div",{className:"absolute inset-0 bg-white shadow-[0px_2px_8px_0px_rgba(0,0,0,0.15)]",style:{padding:a},children:t.jsx("div",{className:"relative w-full h-full overflow-hidden",children:t.jsx("img",{src:s,alt:e,className:"absolute left-0 top-0 w-full h-full object-cover select-none",style:{objectPosition:"center",userSelect:"none"},draggable:!1})})})})}function z(s){let e=0;for(let a=0;a<s.length;a++)e=(e<<5)-e+s.charCodeAt(a);return e>>>0}function V(s){let e=s;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function W({images:s,pageType:e="writing",height:a=360,rotationMin:r=.5,rotationMax:n=1.5,duration:d}){const[m,N]=c.useState(()=>s.map((i,o)=>o)),[v,g]=c.useState(!1),[f,j]=c.useState(!1),_=q(),M=c.useMemo(()=>{const i=Math.max(r,0),o=Math.max(n-r,0);return s.map((p,x)=>{const u=V(z(p.src+":"+x)),l=(u()*o+i)*(u()>.5?1:-1),h=u()*2-1;return{angle:l,tx:h}})},[s,r,n]),I=m[0]??0,S=s[I]?.caption,$=()=>{f||m.length<2||j(!0)},C=()=>{N(([i,...o])=>[...o,i]),j(!1)},E=d??(_?0:.4),R=[.25,.46,.45,.94];return t.jsx(b,{pageType:e,caption:S,children:t.jsx("div",{className:"relative w-full",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:t.jsx("div",{className:"relative w-full",style:{height:a},children:m.map((i,o)=>{const p=s[i],x=s.length-o,u=M[i]??{angle:0,tx:0},l=o===0,h=o===1,y=v?0:u.angle,w=v?0:u.tx,T=l&&f?0:1;return t.jsx(P.div,{className:"absolute inset-0",style:{zIndex:x,transformOrigin:"50% 50%"},initial:{opacity:1,y:0,rotate:y,x:w},animate:{opacity:T,y:l&&f?-28:0,rotate:y,x:w},transition:{duration:E,ease:R},onAnimationComplete:()=>{l&&f&&C()},onClick:l?$:void 0,role:l?"button":void 0,"aria-label":l?"Next photo":void 0,children:t.jsx(D,{src:p.src,alt:p.alt})},`${p.src}-${i}`)})})})})}function X({blocks:s}){return t.jsx("div",{className:"flex flex-col gap-4 w-full overflow-visible",children:s.map((e,a)=>{if(e.type==="sectionHeader")return t.jsxs("div",{className:"flex items-center gap-3 w-full mt-8 mb-2 overflow-visible",children:[t.jsx("span",{className:"portfolio-text halbfett whitespace-nowrap",children:e.title}),t.jsx("span",{className:"flex-1 border-t",style:{borderColor:"var(--portfolio-border)"}})]},`section-${a}`);if(e.type==="text")return t.jsx("p",{className:"portfolio-text",children:e.content},`text-${a}`);if(e.type==="image"){const{image:r}=e;return t.jsx(O,{src:r.src,alt:r.alt,pageType:"writing",caption:r.caption},`image-${a}`)}if(e.type==="video"){const{video:r}=e;return t.jsx(F,{src:r.src,caption:r.caption},`video-${a}`)}if(e.type==="quote"){const{quote:r,cite:n}=e;return t.jsxs("figure",{className:"mt-6 mb-4 pl-4 border-l-2",style:{borderColor:"var(--portfolio-border)"},children:[t.jsx("blockquote",{className:"portfolio-text halbfett text-[#9c9c9b]",children:r}),n&&t.jsxs("figcaption",{className:"mt-2 text-sm text-[#9c9c9b]",children:["â€” ",n]})]},`quote-${a}`)}if(e.type==="framedText"){const{text:r,height:n}=e,d=n??200;return t.jsx("div",{className:"w-full",children:t.jsx("div",{className:"mt-10 mb-6 inline-image-container w-full md:w-[115%] md:-ml-[7.5%]",children:t.jsxs("div",{className:"relative w-full overflow-hidden shadow-[0px_2px_8px_0px_rgba(0,0,0,0.15)]",children:[t.jsx("div",{className:"w-full flex items-center justify-center bg-white",style:{height:`${d}px`},children:t.jsx("span",{className:"portfolio-text text-[#6a6a6a]",children:r})}),t.jsx("div",{"aria-hidden":"true",className:"pointer-events-none absolute border-[8px] border-solid border-white inset-[-8px] shadow-[0px_2px_8px_0px_rgba(0,0,0,0.15)]"})]})})},`framed-${a}`)}return e.type==="imageStack"?t.jsx(W,{images:e.stack,pageType:"writing",height:e.height},`stack-${a}`):null})})}export{X as W};
